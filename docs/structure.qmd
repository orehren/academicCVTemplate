---
title: "Structure & Layout"
---

# Extension Structure

This page explains the architecture of the `academicCVTemplate` extension.

## 1. Data Caching Mechanism

To avoid hitting Google API limits and to speed up rendering, the extension uses a caching system.

*   **Cache File:** Fetched data is stored in a hidden file: `.cv_cache.rds`.
*   **Validity:** The cache is valid for **24 hours**.
*   **Forcing Update:** If you update your Google Sheet and want to see changes immediately, you must **delete** the `.cv_cache.rds` file (and optionally `_cv_data.yml`) from your project root. The next render will force a fresh fetch.

## 2. Extension Components

The extension operates as a Quarto Project Extension:

1.  **Pre-render Script:** Fetches data and writes it to `_cv_data.yml` (and updates cache).
2.  **Filters:** `inject_metadata.lua` converts this YAML into Typst variables.
3.  **Template:** `template.typ` renders the PDF.

**Output:** By default, the generated PDF is saved to the `_output/` directory.

## 3. Layout Logic (The Grid)

The template uses a consistent two-column grid:
*   **Left Column (Sidebar):** Narrow, right-aligned.
*   **Right Column (Content):** Wide, left-aligned.

### Row-by-Row Mapping (`cv-section`)

When using `{{< cv-section >}}`, the data is processed row by row. The Typst function (e.g., `#resume-entry`) receives the row's data as arguments in a specific sequence and maps them to the grid.

*   **Arg 1:** Left Column (Date/Label).
*   **Arg 2:** Right Column (Title - Bold).
*   **Arg 3:** Left Column (Sub-label).
*   **Arg 4:** Right Column (Description).
*   **Arg 5+:** Right Column (Details).

## 4. Typst Function Reference

These functions define the layout of your content.

| Function | Use Case |
| :--- | :--- |
| `resume-entry` | Standard CV entries (Jobs, Degrees). |
| `research-interests` | Simple lists, optimized for right-column content. |
| `publication-list` | Bibliographies. |
| `visualize-skills-list` | Graphical skill bars. |

See **[Shortcodes & Content](./shortcodes.qmd)** for usage examples.

## 5. File Reference

Typst files are located in `_extensions/orehren/acvt/typst/`.

| Filename | Purpose |
| :--- | :--- |
| `template.typ` | Entry point. |
| `typst-template.typ` | Main document structure. |
| `02-definitions-metadata.typ` | **Generated.** Contains injected data. |
| `03-definitions-styling.typ` | Styles and Colors. |
| `04-definitions-parts-functions.typ` | Layout functions. |
