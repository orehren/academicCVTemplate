---
title: "Data Integration"
---

# Data Integration

This template separates content from layout by fetching data from Google Sheets.

## 1. Setup Data Integration

Before you can render your CV, you must authenticate with Google Drive. The extension's pre-render script runs non-interactively, so it relies on a **cached authentication token**.

### Step 1: Authenticate Interactively

Open your R console (in your project directory) and run:

```r
library(googledrive)
drive_auth()
```

1.  This will open a browser window.
2.  Log in with the Google account that has access to your CV spreadsheet.
3.  Grant the requested permissions.

### Step 2: Verify Token Cache

By default, `googledrive` stores credentials in a user-level cache (e.g., `~/.cache/gargle`).
*   **Global Environment:** If you run Quarto from the same user account as R, it will find the token automatically.
*   **Project Environment:** If you encounter issues, ensure your R environment (e.g., `renv`) allows access to the global cache, or authenticate specifically within the project.

Once authenticated interactively *once*, the token persists, and the pre-render script can run without prompting you.

## 2. Configuration

In your `.qmd` file, configure the connection in the `google-document` YAML block.

```yaml
google-document:
  auth-email: "your.email@gmail.com" # The email you authenticated with
  document-identifier: "Name_of_Your_Sheet"
  sheets-to-load:
    - name: "Working Experiences"
      shortname: "working"
```

For a full list of options, see the **[`google-document` YAML Reference](./yaml_reference.qmd#data-integration-google-document)**.

## 3. Spreadsheet Structure

Your Google Sheet should have separate tabs for each section. The first row must contain **Column Headers**.

### Example: Skills (Visualized)

For the visual skills bar (using `visualize-skills-list`), your data **must** include a `value` column (0.0 - 1.0):

| area | skill | value | level |
| :--- | :--- | :--- | :--- |
| Languages | English | 1.0 | Native |
| Tech | R | 0.9 | Expert |

### Example: Working Experience

| title | location | description | start | end |
| :--- | :--- | :--- | :--- | :--- |
| Researcher | Uni X | Project Y | 2020 | 2024 |

## 4. Connecting Data to Layout

Use the `{{< cv-section >}}` shortcode to map your data to the layout.

```markdown
{{< cv-section sheet="working" func="resume-entry" >}}
```

See **[Shortcodes Reference](./shortcodes.qmd)** for details on controlling the layout.
